invalid value "" for type type.googleapis.com/envoy.api.v2.auth.CommonTlsContext):


{"resources":[{"@type":"type.googleapis.com/envoy.api.v2.Listener",
    "address":{"socket_address":{"address":"127.0.0.1","port_value":80,"protocol":"TCP"}},
    "filter_chains":[
        {"filter_chain_match":{"sni_domains":[]},
        "filters":[
            {"config":{"access_log":[{"config":{"path":"access.log"},"name":"envoy.file_access_log"}],"codec_type":"AUTO",
                "http_filters":[
                    {"config":{"upstream_log":{"config":{"path":"upstream.log"},"name":"envoy.file_access_log"}},"name":"envoy.router"},
                    {"name":"envoy.filters.http.lua","typed_config":{"@type":"type.googleapis.com/envoy.config.filter.http.lua.v2.Lua","inline_code":"local mylibrary = require(\"lib.mylibrary\")\nprint(\"===========lua lib loaded.....======\")\n\nfunction envoy_on_request(request_handle)\n\n\n  local message=\"=========AAAAABBBBCCCCC============\"\n  request_handle:logTrace(message)\n  request_handle:logDebug(message)\n  request_handle:logInfo(message)\n  request_handle:logWarn(message)\n  request_handle:logErr(message)\n  request_handle:logCritical(message)\n\n  request_handle:headers():add(\"foo\", mylibrary.foobar())\nend\nfunction envoy_on_response(response_handle)\n  local message=\"=========response called============\"\n  response_handle:logTrace(message)\n  body_size = response_handle:body():length()\n  response_handle:headers():add(\"response-body-size\", tostring(body_size))\nend\n"}}],"rds":{"config_source":{"api_config_source":{"api_type":"REST","cluster_names":["xds_cluster"],"refresh_delay":"30s"}},"route_config_name":"http"},"stat_prefix":"http","use_remote_address":true},"name":"envoy.http_connection_manager"}]}],"name":"http"},
         {
             
            "@type":"type.googleapis.com/envoy.api.v2.Listener",
            "address":{"socket_address":{"address":"127.0.0.1","port_value":443,"protocol":"TCP"}},
            "filter_chains":[{"filter_chain_match":{"sni_domains":[""]},
            "filters":[{"config":{"access_log":[{"config":{"path":"access.log"},"name":"envoy.file_access_log"}],
            "codec_type":"AUTO","http_filters":[{"config":{"upstream_log":{"config":{"path":"upstream.log"},"name":"envoy.file_access_log"}},"name":"envoy.router"},{"name":"envoy.filters.http.lua","typed_config":{"@type":"type.googleapis.com/envoy.config.filter.http.lua.v2.Lua","inline_code":"local mylibrary = require(\"lib.mylibrary\")\nprint(\"===========lua lib loaded.....======\")\n\nfunction envoy_on_request(request_handle)\n\n\n  local message=\"=========AAAAABBBBCCCCC============\"\n  request_handle:logTrace(message)\n  request_handle:logDebug(message)\n  request_handle:logInfo(message)\n  request_handle:logWarn(message)\n  request_handle:logErr(message)\n  request_handle:logCritical(message)\n\n  request_handle:headers():add(\"foo\", mylibrary.foobar())\nend\nfunction envoy_on_response(response_handle)\n  local message=\"=========response called============\"\n  response_handle:logTrace(message)\n  body_size = response_handle:body():length()\n  response_handle:headers():add(\"response-body-size\", tostring(body_size))\nend\n"}}],"rds":{"config_source":{"api_config_source":{"api_type":"REST","cluster_names":["xds_cluster"],"refresh_delay":"30s"}},"route_config_name":"https"},"stat_prefix":"https","use_remote_address":true},"name":"envoy.http_connection_manager"}],"tls_context":{"common_tls_context":""}}],"name":"https"}],"type_url":"type.googleapis.com/envoy.api.v2.Listener","version_info":"0"}

[2020-07-12 20:41:13.664][6276524][info][upstream] [external/envoy/source/common/upstream/cds_api_impl.cc:77] cds: add 1 cluster(s), remove 1 cluster(s)
[2020-07-12 20:41:45.798][6276524][warning][config] [external/envoy/source/common/config/http_subscription_impl.cc:120] REST config for /v2/discovery:listeners rejected: Unable to parse JSON as proto (INVALID_ARGUMENT:(filter_chains[0].tls_context.common_tls_context): invalid value "" for type type.googleapis.com/envoy.api.v2.auth.CommonTlsContext): {"resources":[{"@type":"type.googleapis.com/envoy.api.v2.Listener","address":{"socket_address":{"address":"127.0.0.1","port_value":80,"protocol":"TCP"}},"filter_chains":[{"filter_chain_match":{"sni_domains":[]},"filters":[{"config":{"access_log":[{"config":{"path":"access.log"},"name":"envoy.file_access_log"}],"codec_type":"AUTO","http_filters":[{"config":{"upstream_log":{"config":{"path":"upstream.log"},"name":"envoy.file_access_log"}},"name":"envoy.router"},{"name":"envoy.filters.http.lua","typed_config":{"@type":"type.googleapis.com/envoy.config.filter.http.lua.v2.Lua","inline_code":"local mylibrary = require(\"lib.mylibrary\")\nprint(\"===========lua lib loaded.....======\")\n\nfunction envoy_on_request(request_handle)\n\n\n  local message=\"=========AAAAABBBBCCCCC============\"\n  request_handle:logTrace(message)\n  request_handle:logDebug(message)\n  request_handle:logInfo(message)\n  request_handle:logWarn(message)\n  request_handle:logErr(message)\n  request_handle:logCritical(message)\n\n  request_handle:headers():add(\"foo\", mylibrary.foobar())\nend\nfunction envoy_on_response(response_handle)\n  local message=\"=========response called============\"\n  response_handle:logTrace(message)\n  body_size = response_handle:body():length()\n  response_handle:headers():add(\"response-body-size\", tostring(body_size))\nend\n"}}],"rds":{"config_source":{"api_config_source":{"api_type":"REST","cluster_names":["xds_cluster"],"refresh_delay":"30s"}},"route_config_name":"http"},"stat_prefix":"http","use_remote_address":true},"name":"envoy.http_connection_manager"}]}],"name":"http"},{"@type":"type.googleapis.com/envoy.api.v2.Listener","address":{"socket_address":{"address":"127.0.0.1","port_value":443,"protocol":"TCP"}},"filter_chains":[{"filter_chain_match":{"sni_domains":[""]},"filters":[{"config":{"access_log":[{"config":{"path":"access.log"},"name":"envoy.file_access_log"}],"codec_type":"AUTO","http_filters":[{"config":{"upstream_log":{"config":{"path":"upstream.log"},"name":"envoy.file_access_log"}},"name":"envoy.router"},{"name":"envoy.filters.http.lua","typed_config":{"@type":"type.googleapis.com/envoy.config.filter.http.lua.v2.Lua","inline_code":"local mylibrary = require(\"lib.mylibrary\")\nprint(\"===========lua lib loaded.....======\")\n\nfunction envoy_on_request(request_handle)\n\n\n  local message=\"=========AAAAABBBBCCCCC============\"\n  request_handle:logTrace(message)\n  request_handle:logDebug(message)\n  request_handle:logInfo(message)\n  request_handle:logWarn(message)\n  request_handle:logErr(message)\n  request_handle:logCritical(message)\n\n  request_handle:headers():add(\"foo\", mylibrary.foobar())\nend\nfunction envoy_on_response(response_handle)\n  local message=\"=========response called============\"\n  response_handle:logTrace(message)\n  body_size = response_handle:body():length()\n  response_handle:headers():add(\"response-body-size\", tostring(body_size))\nend\n"}}],"rds":{"config_source":{"api_config_source":{"api_type":"REST","cluster_names":["xds_cluster"],"refresh_delay":"30s"}},"route_config_name":"https"},"stat_prefix":"https","use_remote_address":true},"name":"envoy.http_connection_manager"}],"tls_context":{"common_tls_context":""}}],"name":"https"}],"type_url":"type.googleapis.com/envoy.api.v2.Listener","version_info":"0"}